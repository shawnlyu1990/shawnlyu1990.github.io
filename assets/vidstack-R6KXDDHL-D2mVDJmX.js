var u=/(?:https:\/\/)?(?:player\.)?vimeo(?:\.com)?\/(?:video\/)?(\d+)(?:(?:\?hash=|\?h=|\/)(.*))?/,a=new Map,n=new Map;function v(o){let i=o.match(u);return{videoId:i==null?void 0:i[1],hash:i==null?void 0:i[2]}}async function f(o,i,r){if(a.has(o))return a.get(o);if(n.has(o))return n.get(o);let t=`https://vimeo.com/api/oembed.json?url=https://player.vimeo.com/video/${o}`;r&&(t=t.concat(`?h=${r}`));let s=window.fetch(t,{mode:"cors",signal:i.signal}).then(e=>e.json()).then(e=>{var d,l;let m=/vimeocdn.com\/video\/(.*)?_/,c=(l=(d=e==null?void 0:e.thumbnail_url)==null?void 0:d.match(m))==null?void 0:l[1],p=c?`https://i.vimeocdn.com/video/${c}_1920x1080.webp`:"",h={title:(e==null?void 0:e.title)??"",duration:(e==null?void 0:e.duration)??0,poster:p,pro:e.account_type!=="basic"};return a.set(o,h),h}).finally(()=>n.delete(o));return n.set(o,s),s}export{f as getVimeoVideoInfo,v as resolveVimeoVideoId};
