import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as h,d as k,o as n}from"./app-BICfmULO.js";const i="/assets/postsimages/2025-05-19-LVM%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95/01-%E4%BF%AE%E6%94%B9%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%A1%AC%E7%9B%98%E5%AE%B9%E9%87%8F.png",l={};function t(p,s){return n(),h("div",null,s[0]||(s[0]=[k('<h2 id="场景1-直接修改原始磁盘大小-虚拟机环境" tabindex="-1"><a class="header-anchor" href="#场景1-直接修改原始磁盘大小-虚拟机环境"><span>场景1：直接修改原始磁盘大小（虚拟机环境）</span></a></h2><p>我们需要给虚拟机的磁盘增加空间，从现在的 100G 增加到 1000G，然后把这些空间都扩容给根分区。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>下面的步骤中需要使用 <code>xfs_growfs</code> 和 <code>parted</code> 命令，需要安装 parted 和 xfsprogs 软件包，如果没有安装的话，需要提前安装一下。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xfsprogs</span></span></code></pre></div></div><ol><li><p>在虚拟机中修改硬盘容量。</p><figure><img src="'+i+`" alt="修改虚拟机硬盘容量" tabindex="0" loading="lazy"><figcaption>修改虚拟机硬盘容量</figcaption></figure></li><li><p>使用 <code>fdisk -l</code> 命令，查看 <code>/dev/sda</code> 的容量已经修改成功了。</p><p>另外，从这里面，我们可以看出，当前这个 <code>/dev/sda</code> 磁盘有两个分区，sda1 是 boot 分区，分区大小简单计算一下大概在 2G 左右，剩下的都是 sda2 分区。</p><div class="language-bash has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# fdisk -l</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073.7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GB,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073741824000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2097152000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Units</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">I/O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> label</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> identifier:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x000c49ef</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Boot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         End</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Blocks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  System</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">   *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        2048</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     4196351</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     2097152</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   83</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         4196352</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   209715199</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   102759424</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   8e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LVM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/centos-root:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 105.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GB,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 105222504448</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 205512704</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Units</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">I/O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (minimum/optimal): 512 bytes / 512 bytes</span></span></code></pre><div class="collapsed-lines"></div></div></li><li><p>使用 <code>parted</code> 命令修改 <code>/dev/sda2</code> 分区的容量,</p><div class="language-bash has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# parted</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">GNU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Parted</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Welcome</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GNU</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Parted!</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;help&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> view</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> commands.</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">p</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 列出所有分区的大小</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Model:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VMware</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (scsi)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1074GB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512B/512B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Table:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> msdos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   End</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     File</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Flags</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      1049kB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  2149MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  2147MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  primary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      2149MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  107GB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   105GB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   primary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               lvm</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">resizepart</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 修改第二个分区的大小</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">End?</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  [107GB]? 1074GB </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 将结束位置设置在 1074GB，这个值可以参考 sda 的总大小</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">p</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 再次查看修改后的分区大小</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Model:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> VMware</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Virtual</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (scsi)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 1074GB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512B/512B</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Table:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> msdos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Flags:</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Number</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   End</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     File</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> system</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Flags</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      1049kB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  2149MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  2147MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  primary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">          boot</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      2149MB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1074GB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1072GB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  primary</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               lvm</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">parted</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">quit</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 退出</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Information:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> You</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> may</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> need</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/fstab.</span></span></code></pre><div class="collapsed-lines"></div></div></li><li><p>扩容物理卷</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# pvs  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看当前 pv 信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  PV</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         VG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Fmt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Attr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PSize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   PFree</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  /dev/sda2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  centos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lvm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">98.00g</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# pvresize -t /dev/sda2 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 对 /dev/sda2 物理卷扩容</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  TEST</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MODE:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Metadata</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NOT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volumes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (de)activated.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Physical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;/dev/sda2&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> changed</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> physical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">resized</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> updated</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> physical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">s</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">not</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resized</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# pvs  </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 扩容成功后，再次查看 pv 信息</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  PV</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         VG</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     Fmt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Attr</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> PSize</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    PFree</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  </span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  /dev/sda2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  centos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lvm2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> a--</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">998.00g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 900.00g</span></span></code></pre></div></li><li><p>查看卷组状态，卷组也已经扩容成功。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# vgs</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  VG</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">     #PV #LV #SN Attr   VSize    VFree  </span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  centos</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> wz--n-</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">998.00g</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 900.00g</span></span></code></pre></div><div class="hint-container note"><p class="hint-container-title">注</p><p>卷组是一个或多个物理卷的集合，所以物理卷扩容了，卷组自然就跟着扩容了。</p></div></li><li><p>扩容逻辑卷</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# lvextend -l +100%FREE /dev/mapper/centos-root </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos/root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> changed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &lt;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">98.00</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GiB</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (25087 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">extents</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) to &lt;998.00 GiB (</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">255487</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> extents</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  Logical</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> volume</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos/root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> successfully</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resized.</span></span></code></pre></div></li><li><p>此时 <code>df -kh</code> 命令查看根分区还是 98G，没扩容成功？其实上面的操作只是扩容了卷的大小，我们还需要增加文件系统的大小。这样才能获得真实可用的空间。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# df -kh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Use%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                 3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8.8M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/mapper/centos-root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   98G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   93G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  5.7G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  95%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                2.0G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  197M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1.8G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  10%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                    783M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  783M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span></span></code></pre></div></li><li><p>确认一下分区格式，发现是 <code>xfs</code> 格式。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# df -Th</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Use%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8.8M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/mapper/centos-root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        98G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   93G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  5.7G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  95%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       2.0G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  197M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1.8G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  10%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     783M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  783M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span></span></code></pre></div></li><li><p>使用 <code>xfs_growfs</code> 命令扩展分区大小。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# xfs_growfs /dev/mapper/centos-root </span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">meta-data</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/dev/mapper/centos-root</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> isize</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">512</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    agcount</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">4,</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;"> agsize</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">6422272</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;"> blks</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       sectsz=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   attr=2,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> projid32bit=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       crc=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        finobt=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> spinodes=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       bsize=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   blocks=25689088,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> imaxpct=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">25</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       sunit=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      swidth=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> blks</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">naming</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   =version</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              bsize=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   ascii-ci=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ftype=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">log</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      =internal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               bsize=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   blocks=12543,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       sectsz=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   sunit=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> blks,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lazy-count=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">realtime</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =none</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   extsz=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">4096</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   blocks=0,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rtextents=</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">data</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> blocks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> changed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> from</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 25689088</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 261618688</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>不同的分区格式对应不同的扩展命令。<br> xfs 格式的分区，使用 <code>xfs_growfs</code> 命令进行扩展。<br> ext2/3/4 格式的分区，使用 <code>resize2fs</code> 命令进行扩展。</p></div></li><li><p>扩容后，再次查看根分区大小，扩容成功。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# df -Th</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Use%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8.8M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/mapper/centos-root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       998G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   93G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  906G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  10%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       2.0G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  197M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1.8G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  10%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     783M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  783M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run/user/0</span></span></code></pre></div></li></ol><h2 id="场景2-修改虚拟机磁盘大小-将新增空间划分独立分区后扩容分区大小-虚拟机环境" tabindex="-1"><a class="header-anchor" href="#场景2-修改虚拟机磁盘大小-将新增空间划分独立分区后扩容分区大小-虚拟机环境"><span>场景2：修改虚拟机磁盘大小，将新增空间划分独立分区后扩容分区大小（虚拟机环境）</span></a></h2><p>我们需要给虚拟机的磁盘增加空间，从现在的 100G 增加到 1000G，然后把这些空间都扩容给根分区。</p><div class="hint-container tip"><p class="hint-container-title">提示</p><p>下面的步骤中需要使用 <code>xfs_growfs</code> 和 <code>parted</code> 命令，需要安装 parted 和 xfsprogs 软件包，如果没有安装的话，需要提前安装一下。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">yum</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -y</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> parted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xfsprogs</span></span></code></pre></div></div><ol><li><p>在虚拟机中修改硬盘容量。</p><figure><img src="`+i+`" alt="修改虚拟机硬盘容量" tabindex="0" loading="lazy"><figcaption>修改虚拟机硬盘容量</figcaption></figure></li><li><p>使用 <code>fdisk -l</code> 命令，查看 <code>/dev/sda</code> 的容量已经修改成功了。</p><div class="language-bash has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# fdisk -l</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073.7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GB,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073741824000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2097152000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Units</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">I/O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> label</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> identifier:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x000c49ef</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Boot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         End</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Blocks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  System</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">   *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        2048</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     4196351</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     2097152</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   83</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         4196352</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   209715199</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   102759424</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   8e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LVM</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/centos-root:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 105.2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GB,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 105222504448</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 205512704</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Units</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">I/O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (minimum/optimal): 512 bytes / 512 bytes</span></span></code></pre><div class="collapsed-lines"></div></div></li><li><p>使用 <code>fdisk</code> 命令，创建新分区。</p><div class="language-bash has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# fdisk /dev/sda</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Welcome</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (util-linux </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2.23.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Changes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> only,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> until</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> decide</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> them.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> careful</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> before</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> command.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (m </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): n </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># n 代表创建一个新分区</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   p</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   primary</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (2 </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">primary,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> extended,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> free</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   extended</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Select</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (default </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">p</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): p </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># p 表示分区类型设置为主分区</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> number</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (3,4, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): 3 </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 输入3，或者按回车，使用默认值</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">First</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (209715200-2097151999, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 209715200</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 按回车，使用默认值</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> value</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 209715200</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Last</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sector,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +size{K,M,G}</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (209715200-2097151999, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2097151999</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 按回车，使用默认值</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Partition</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> and</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 900</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GiB</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> is</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set</span></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (m </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): w </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 保存配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> has</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> been</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> altered!</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Calling</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ioctl</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">() </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> re-read</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">WARNING:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Re-reading</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partition</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> failed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> with</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> error</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 16:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> resource</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> busy.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kernel</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> still</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> uses</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> old</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table.</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> The</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> new</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> table</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> at</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> next</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> reboot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> after</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> partprobe</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">) </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">or</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> kpartx</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Syncing</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disks.</span></span></code></pre><div class="collapsed-lines"></div></div></li><li><p>再次使用 <code>fdisk -l</code> 命令，查看分区大小。</p><div class="language-bash has-collapsed-lines collapsed" data-highlighter="shiki" data-ext="bash" style="--vp-collapsed-lines:15;--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# fdisk /dev/sda</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Welcome</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> fdisk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (util-linux </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2.23.2</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">).</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Changes</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> will</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remain</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> memory</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> only,</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> until</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> you</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> decide</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> them.</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Be</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> careful</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> before</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> using</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> the</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> write</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> command.</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Command</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (m </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">for</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> help</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): p </span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 查看当前的分区表</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073.7</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> GB,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1073741824000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes,</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2097152000</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Units</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> sectors</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> of</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;"> *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> =</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 512</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sector</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (logical/physical): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">I/O</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> size</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (minimum/optimal): 512 bytes / 512 bytes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> label</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> type:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dos</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Disk</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> identifier:</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 0x000c49ef</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">   Device</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Boot</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Start</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">         End</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Blocks</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   Id</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  System</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#E45649;--shiki-dark:#E5C07B;">   *</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">        2048</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     4196351</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     2097152</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   83</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">         4196352</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   209715199</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   102759424</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   8e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LVM</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">       209715200</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  2097151999</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">   943718400</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   8e</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Linux</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> LVM</span></span></code></pre><div class="collapsed-lines"></div></div></li><li><p>输入 <code>partprobe</code> 让系统识别新增的分区，然后创建物理卷。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">partprobe</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pvcreate</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda3</span></span></code></pre></div></li><li><p>扩展卷组。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vgdisplay</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vgextend</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> centos</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/sda3</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vgdisplay</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 或者</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> vgs</span></span></code></pre></div><div class="hint-container note"><p class="hint-container-title">注</p><p>原来 centos 卷组里面只有一个 /dev/sda2 物理卷，现在将/dev/sda3 物理卷也添加到这卷组中。所以现在 centos 卷组的容量就变成了两个物理卷容量之和。</p></div></li><li><p>扩容逻辑卷</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lvextend</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +100%FREE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/centos-root</span></span></code></pre></div><div class="hint-container note"><p class="hint-container-title">注</p><p>上面的命令会将卷组内所有的剩余空间全部扩展到 /dev/mapper/centos-root 逻辑卷中。</p><p>如果不想使用卷组内的所有空间，可以使用 <code>lvextend -L +100G /dev/mapper/centos-root</code> 命令为逻辑卷增加 100G 空间。</p></div></li><li><p>扩容文件系统的大小。这样才能获得真实可用的空间。</p><p>确认一下分区格式，发现是 <code>xfs</code> 格式。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">[root@localhost ~]# df -Th</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Filesystem</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">              Type</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      Size</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  Used</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Avail</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Use%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Mounted</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> on</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                devtmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/shm</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  8.8M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   1%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /run</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     3.9G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.9G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /sys/fs/cgroup</span></span>
<span class="line highlighted"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/mapper/centos-root</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">        98G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   93G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  5.7G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  95%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">/dev/sda1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               xfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">       2.0G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  197M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  1.8G</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  10%</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   tmpfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">     783M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">     0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  783M</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">   0%</span></span></code></pre></div><p>使用 <code>xfs_growfs</code> 命令扩展分区大小。</p><div class="language-bash" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">xfs_growfs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /dev/mapper/centos-root</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>不同的分区格式对应不同的扩展命令。<br> xfs 格式的分区，使用 <code>xfs_growfs</code> 命令进行扩展。<br> ext2/3/4 格式的分区，使用 <code>resize2fs</code> 命令进行扩展。</p></div></li><li><p>扩容后，使用 <code>df -Th</code> 再次查看根分区大小，扩容成功。</p></li></ol><h2 id="场景3-添加硬盘的方式扩容" tabindex="-1"><a class="header-anchor" href="#场景3-添加硬盘的方式扩容"><span>场景3：添加硬盘的方式扩容</span></a></h2><p>基本思路与场景2一致，区别在于，这里是添加一块新硬盘，然后进行分区。</p>`,10)]))}const r=a(l,[["render",t]]),g=JSON.parse('{"path":"/posts/Config/Linux/Config/2025-05-19-LVM%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95.html","title":"LVM 扩容方法","lang":"zh-CN","frontmatter":{"title":"LVM 扩容方法","shortTitle":"LVM 扩容方法","description":"LVM 扩容方法","icon":"/assets/blogicons/Linux.png","author":null,"isOriginal":true,"date":"2025-05-19T00:00:00.000Z","categories":["Linux","磁盘管理"],"tags":["LVM","扩容"],"license":"MIT","sticky":false,"star":true,"article":true,"timeline":true,"comment":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"LVM 扩容方法\\",\\"image\\":[\\"https://shawnlyu1990.github.io/assets/postsimages/2025-05-19-LVM扩容方法/01-修改虚拟机硬盘容量.png\\",\\"https://shawnlyu1990.github.io/assets/postsimages/2025-05-19-LVM扩容方法/01-修改虚拟机硬盘容量.png\\"],\\"datePublished\\":\\"2025-05-19T00:00:00.000Z\\",\\"dateModified\\":\\"2025-05-20T08:11:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"昌霖学长\\",\\"email\\":\\"shawnlyu1990@gmail.com\\"}]}"],["meta",{"property":"og:url","content":"https://shawnlyu1990.github.io/posts/Config/Linux/Config/2025-05-19-LVM%E6%89%A9%E5%AE%B9%E6%96%B9%E6%B3%95.html"}],["meta",{"property":"og:site_name","content":"昌霖学长的自习室"}],["meta",{"property":"og:title","content":"LVM 扩容方法"}],["meta",{"property":"og:description","content":"LVM 扩容方法"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://shawnlyu1990.github.io/assets/postsimages/2025-05-19-LVM扩容方法/01-修改虚拟机硬盘容量.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-20T08:11:56.000Z"}],["meta",{"property":"article:tag","content":"扩容"}],["meta",{"property":"article:tag","content":"LVM"}],["meta",{"property":"article:published_time","content":"2025-05-19T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-20T08:11:56.000Z"}]]},"git":{"createdTime":1747728716000,"updatedTime":1747728716000,"contributors":[{"name":"Shawn Lyu","username":"","email":"shawnlyu1990@gmail.com","commits":1}]},"readingTime":{"minutes":8.07,"words":2420},"filePathRelative":"posts/Config/Linux/Config/2025-05-19-LVM扩容方法.md","excerpt":"","copyright":{"license":"MIT"}}');export{r as comp,g as data};
