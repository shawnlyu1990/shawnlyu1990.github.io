import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as t,o as e}from"./app--kRYgpm7.js";const h={};function l(n,i){return e(),a("div",null,i[0]||(i[0]=[t('<h2 id="问题现象" tabindex="-1"><a class="header-anchor" href="#问题现象"><span>问题现象</span></a></h2><p>旧版本的 MySQL 可以通过一行命令给用户添加上访问权限。</p><div class="code-block-with-title"><div class="code-block-title-bar" data-title="旧版本 MySQL 授权语句"><span>旧版本 MySQL 授权语句</span></div><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">GRANT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ALL PRIVILEGES </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">ON</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *.* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">TO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;root&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> IDENTIFIED </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">BY</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;mypassword&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> WITH</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> GRANT</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> OPTION</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div></div><p>但在 MySQL 8.0.40 版本中，按上面的方式操作会报以下错误。</p><div class="language-log" data-highlighter="shiki" data-ext="log" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro has-highlighted vp-code"><code><span class="line highlighted error"><span style="--shiki-light:#50A14F;--shiki-dark:#E06C75;">ERROR</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1064</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">42000</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;IDENTIFIED BY &#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">mypassword&#39; with grant option&#39; at line </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span></code></pre></div><h2 id="问题原因-解决方法" tabindex="-1"><a class="header-anchor" href="#问题原因-解决方法"><span>问题原因 &amp; 解决方法</span></a></h2><p><strong>问题原因</strong></p><p>由于 MySQL 8.0 以后版本将创建账户和赋予权限分开了，需要用不同的语句创建账号和赋予远程权限。</p><p><strong>解决方法</strong></p><ol><li><p>先进入 mysql 数据库</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">use</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> mysql;</span></span></code></pre></div></li><li><p>在 user 表中创建账号</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">create</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> user</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &#39;</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">root</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&#39;@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> identified </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">by</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;mypassword&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div></li><li><p>给创建好的账号赋予远程权限</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">grant</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> all privileges </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *.* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;root&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;10.150.32.100&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> with</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> grant</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div><div class="hint-container tip"><p class="hint-container-title">提示</p><p>允许所有 IP 远程访问(有风险！)</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">grant</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> all privileges </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">on</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> *.* </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">to</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;root&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">@</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;%&#39;</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> with</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> grant</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;"> option</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">;</span></span></code></pre></div></div></li><li><p>刷新数据库权限</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">FLUSH PRIVILEGES;</span></span></code></pre></div></li><li><p>查看数据库中的用户权限表</p><div class="language-sql" data-highlighter="shiki" data-ext="sql" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">SELECT</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> User,authentication_string,Host </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">FROM</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> user;</span></span></code></pre></div></li></ol>',10)]))}const r=s(h,[["render",l]]),d=JSON.parse('{"path":"/posts/Config/Database/MySQL/FAQ/2025-04-16-MySQL8%E7%9A%84%E6%8E%88%E6%9D%83%E6%96%B9%E5%BC%8F.html","title":"MySQL 8.0 以后版本的授权方式","lang":"zh-CN","frontmatter":{"title":"MySQL 8.0 以后版本的授权方式","shortTitle":"MySQL 8.0 以后版本的授权方式","description":"由于 MySQL 8.0 以后版本中将创建账户和赋予权限分开了，需要用不同的语句创建账号和赋予远程权限。","icon":"/assets/blogicons/MySQL.png","author":"昌霖学长","isOriginal":true,"date":"2025-04-16T00:00:00.000Z","categories":["数据库","MySQL"],"tags":["MySQL","FAQ","SQL","GRANT","授权"],"license":"MIT","sticky":false,"star":false,"article":true,"timeline":true,"comment":false,"head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"MySQL 8.0 以后版本的授权方式\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2025-04-16T00:00:00.000Z\\",\\"dateModified\\":\\"2025-05-20T08:11:56.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"昌霖学长\\"}]}"],["meta",{"property":"og:url","content":"https://shawnlyu1990.github.io/posts/Config/Database/MySQL/FAQ/2025-04-16-MySQL8%E7%9A%84%E6%8E%88%E6%9D%83%E6%96%B9%E5%BC%8F.html"}],["meta",{"property":"og:site_name","content":"昌霖学长的自习室"}],["meta",{"property":"og:title","content":"MySQL 8.0 以后版本的授权方式"}],["meta",{"property":"og:description","content":"由于 MySQL 8.0 以后版本中将创建账户和赋予权限分开了，需要用不同的语句创建账号和赋予远程权限。"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-05-20T08:11:56.000Z"}],["meta",{"property":"article:author","content":"昌霖学长"}],["meta",{"property":"article:tag","content":"授权"}],["meta",{"property":"article:tag","content":"GRANT"}],["meta",{"property":"article:tag","content":"SQL"}],["meta",{"property":"article:tag","content":"FAQ"}],["meta",{"property":"article:tag","content":"MySQL"}],["meta",{"property":"article:published_time","content":"2025-04-16T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-05-20T08:11:56.000Z"}]]},"git":{"createdTime":1744774382000,"updatedTime":1747728716000,"contributors":[{"name":"Shawn Lyu","username":"","email":"shawnlyu1990@gmail.com","commits":2}]},"readingTime":{"minutes":1.99,"words":597},"filePathRelative":"posts/Config/Database/MySQL/FAQ/2025-04-16-MySQL8的授权方式.md","excerpt":"","copyright":{"license":"MIT"}}');export{r as comp,d as data};
