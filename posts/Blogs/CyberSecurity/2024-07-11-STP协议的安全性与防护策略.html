<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.19" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.70" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme="dark"] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <meta property="og:url" content="https://shawnlyu1990.github.io/posts/Blogs/CyberSecurity/2024-07-11-STP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E4%B8%8E%E9%98%B2%E6%8A%A4%E7%AD%96%E7%95%A5.html"><meta property="og:site_name" content="知识杂货铺"><meta property="og:title" content="STP 协议的安全性与防护策略"><meta property="og:description" content="以华为交换机为例浅析 STP 协议的安全性与防护策略"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-02-11T10:23:29.000Z"><meta property="article:author" content="昌霖学长"><meta property="article:tag" content="网络安全"><meta property="article:tag" content="STP"><meta property="article:tag" content="生成树"><meta property="article:published_time" content="2024-07-11T00:00:00.000Z"><meta property="article:modified_time" content="2025-02-11T10:23:29.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"STP 协议的安全性与防护策略","image":[""],"datePublished":"2024-07-11T00:00:00.000Z","dateModified":"2025-02-11T10:23:29.000Z","author":[{"@type":"Person","name":"昌霖学长"}]}</script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Display:ital,wght@0,100..900;1,100..900&family=Noto+Sans+HK:wght@100..900&family=Noto+Sans+JP:wght@100..900&family=Noto+Sans+KR:wght@100..900&family=Noto+Sans+SC:wght@100..900&family=Noto+Sans+Symbols:wght@100..900&family=Noto+Sans+TC:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet"><link rel="icon" href="/assets/icon/favicon.ico"><title>STP 协议的安全性与防护策略 | 知识杂货铺</title><meta name="description" content="以华为交换机为例浅析 STP 协议的安全性与防护策略">
    <link rel="preload" href="/assets/style-DaS-kcvW.css" as="style"><link rel="stylesheet" href="/assets/style-DaS-kcvW.css">
    <link rel="modulepreload" href="/assets/app-iHV9LoWC.js"><link rel="modulepreload" href="/assets/2024-07-11-STP协议的安全性与防护策略.html-vr7pAGTX.js">
    <link rel="prefetch" href="/assets/index.html-BPb-2jdr.js" as="script"><link rel="prefetch" href="/assets/intro.html-XqwOAvoC.js" as="script"><link rel="prefetch" href="/assets/index.html-BijGHWXs.js" as="script"><link rel="prefetch" href="/assets/index.html-C_KQFVDU.js" as="script"><link rel="prefetch" href="/assets/index.html-B-DnrKfs.js" as="script"><link rel="prefetch" href="/assets/InterestingWebsite.html-CwFaooPe.js" as="script"><link rel="prefetch" href="/assets/OnlineTools.html-Cxe9y_fn.js" as="script"><link rel="prefetch" href="/assets/OpensourceProject.html-D3VcsSPK.js" as="script"><link rel="prefetch" href="/assets/index.html-CiyWRCEc.js" as="script"><link rel="prefetch" href="/assets/macOS_IPSW_格式安装镜像下载.html-Bu-Mn-Dv.js" as="script"><link rel="prefetch" href="/assets/macOS软件工具列表.html-mgRKJWr_.js" as="script"><link rel="prefetch" href="/assets/index.html-sdkDXpNa.js" as="script"><link rel="prefetch" href="/assets/index.html-CM3Ew4nQ.js" as="script"><link rel="prefetch" href="/assets/2024-08-02-使用Kali进行Flood攻击.html-DqFXu6ei.js" as="script"><link rel="prefetch" href="/assets/index.html-DUdKULy3.js" as="script"><link rel="prefetch" href="/assets/2024-08-28-ITIL4Foundation知识点总结.html-Cd-zvMMe.js" as="script"><link rel="prefetch" href="/assets/index.html-MBEAaUR_.js" as="script"><link rel="prefetch" href="/assets/2024-08-23-Linux的目录-proc.html-De0spZEp.js" as="script"><link rel="prefetch" href="/assets/index.html-DZiqPpSW.js" as="script"><link rel="prefetch" href="/assets/2024-07-15-Markdown写作规范和小技巧.html-swSLO2Sx.js" as="script"><link rel="prefetch" href="/assets/2024-08-22-VuePress博客写作技巧.html-IAqGQoy6.js" as="script"><link rel="prefetch" href="/assets/index.html-DvXsYPJP.js" as="script"><link rel="prefetch" href="/assets/index.html-B9sagg97.js" as="script"><link rel="prefetch" href="/assets/index.html-DgTmwi96.js" as="script"><link rel="prefetch" href="/assets/index.html-B_G4kAZX.js" as="script"><link rel="prefetch" href="/assets/index.html-DTYI8wdw.js" as="script"><link rel="prefetch" href="/assets/index.html-B0Og_NzZ.js" as="script"><link rel="prefetch" href="/assets/2024-07-12-WindowsServer和AD域修改密码有效期.html-1cUJzU8r.js" as="script"><link rel="prefetch" href="/assets/2024-12-31-在Windows10和11中关闭休眠功能并清理休眠文件.html-ChbKgnbm.js" as="script"><link rel="prefetch" href="/assets/index.html-C4mC3KKe.js" as="script"><link rel="prefetch" href="/assets/2024-07-12-制作macOS的ISO镜像.html-BJqNtLt1.js" as="script"><link rel="prefetch" href="/assets/2024-07-17-开机自动执行脚本.html-EiMuYSPj.js" as="script"><link rel="prefetch" href="/assets/2024-07-17-给网卡配置多IP.html-BoEQ4-8K.js" as="script"><link rel="prefetch" href="/assets/index.html-CfZrdzhf.js" as="script"><link rel="prefetch" href="/assets/index.html-B5sHJKm7.js" as="script"><link rel="prefetch" href="/assets/2019-02-18-将字符串以特定分隔符分割为数组.html-iqh4Qlo-.js" as="script"><link rel="prefetch" href="/assets/2019-10-16-将数组内容写入文件.html-AsqfKHCg.js" as="script"><link rel="prefetch" href="/assets/2019-10-16-将文件以行分割读取成数组形式.html-GyNvD_2_.js" as="script"><link rel="prefetch" href="/assets/2020-05-21-生成文件MD5校验和.html-BKBF2kMK.js" as="script"><link rel="prefetch" href="/assets/2024-07-15-Anaconda常用命令.html-CjkbbR7u.js" as="script"><link rel="prefetch" href="/assets/index.html-aAvRqHaE.js" as="script"><link rel="prefetch" href="/assets/2024-08-02-PPP协议.html-B9ALjRuA.js" as="script"><link rel="prefetch" href="/assets/index.html-CWNN6kg0.js" as="script"><link rel="prefetch" href="/assets/2024-07-08-三层交换机与路由器.html-BAucsUdg.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-VTY线路和Console线路.html-CUXiVoaS.js" as="script"><link rel="prefetch" href="/assets/index.html-BGOal0mN.js" as="script"><link rel="prefetch" href="/assets/2024-08-02-在虚拟机中安装部署OpenWRT.html-Bkmc3e_I.js" as="script"><link rel="prefetch" href="/assets/index.html-BvJ-kyEm.js" as="script"><link rel="prefetch" href="/assets/index.html-D4uygdCZ.js" as="script"><link rel="prefetch" href="/assets/2021-03-16-OpenLDAP同步AD用户-新增.html-DRlcnTBs.js" as="script"><link rel="prefetch" href="/assets/2021-03-16-OpenLDAP同步AD用户-移动OU.html-DPQ01j_8.js" as="script"><link rel="prefetch" href="/assets/2021-03-16-OpenLDAP同步AD用户-移除.html-CI1zZQ83.js" as="script"><link rel="prefetch" href="/assets/2021-03-16-OpenLDAP导入AD组织架构.html-9sSZitGA.js" as="script"><link rel="prefetch" href="/assets/index.html-M8rR0Mhj.js" as="script"><link rel="prefetch" href="/assets/2020-05-19-PostgreSQL修改数据目录方法记录.html-DoXJwO-Z.js" as="script"><link rel="prefetch" href="/assets/2024-08-02-PostgreSQL查询数据时将NULL值或空值替换为指定内容.html-D1-MvV0T.js" as="script"><link rel="prefetch" href="/assets/index.html-wradr-FU.js" as="script"><link rel="prefetch" href="/assets/2019-10-16-记一次Linux服务器Curl方式访问另一台Linux服务器失败的处理方法.html-telbuCNW.js" as="script"><link rel="prefetch" href="/assets/2020-05-29-查看所有用户的Crontab.html-C-B8PH4C.js" as="script"><link rel="prefetch" href="/assets/2024-07-19-常用命令.html-Duw1ciFk.js" as="script"><link rel="prefetch" href="/assets/2024-08-23-CentOS7模拟各种数据包异常.html-BSOP59dM.js" as="script"><link rel="prefetch" href="/assets/index.html-C5pmTc2n.js" as="script"><link rel="prefetch" href="/assets/2017-02-17-Fedora25部署服务-NTP.html-CMU5Mz2_.js" as="script"><link rel="prefetch" href="/assets/2017-03-02-CentOS6部署服务-Zabbix3.2.html-DM7cvfUF.js" as="script"><link rel="prefetch" href="/assets/2017-06-27-使用CA自签名证书搭建HTTPS网站.html-BlJ1dH30.js" as="script"><link rel="prefetch" href="/assets/2017-09-04-CentOS7部署服务-Zabbix3.2.html-DZNH18Ae.js" as="script"><link rel="prefetch" href="/assets/2019-08-20-CentOS7部署服务-NAT64.html-Bng7JQ1r.js" as="script"><link rel="prefetch" href="/assets/2020-02-22-CentOS7.6部署服务-Python 3.7.0.html-yQQ5M1kC.js" as="script"><link rel="prefetch" href="/assets/2021-03-22-CentOS7部署服务-OpenLDAP.html-D5DvsEez.js" as="script"><link rel="prefetch" href="/assets/2024-08-23-CentOS7部署服务-DNS.html-w_ZUkYKR.js" as="script"><link rel="prefetch" href="/assets/2024-08-23-基于CentOS7的PXE服务器安装Ubuntu的ks文件.html-C_kSKD7I.js" as="script"><link rel="prefetch" href="/assets/index.html-D_KlbX6a.js" as="script"><link rel="prefetch" href="/assets/2024-07-10-命令行语法规范.html-D1Dr8sFs.js" as="script"><link rel="prefetch" href="/assets/index.html-DI8LKDAD.js" as="script"><link rel="prefetch" href="/assets/2024-07-29-以太帧格式-IEEE802.3SNAP以太帧.html-ldq2Uq2k.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-QinQ帧格式.html-CunoGivk.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-VLAN帧格式.html-BzweH44j.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-以太帧格式-EthernetII以太帧.html-CEc8739P.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-以太帧格式-IEEE802.3LLC以太帧.html-ELJHDBoG.js" as="script"><link rel="prefetch" href="/assets/2024-08-01-以太帧格式-NovellNetware802.3Raw以太帧.html-If7Uw9D9.js" as="script"><link rel="prefetch" href="/assets/index.html-DKrerTFS.js" as="script"><link rel="prefetch" href="/assets/2024-07-17-VMware-小技巧-VMwareFusion修改虚拟网卡的IP地址段.html-CbVJewmU.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ6CMANo.js" as="script"><link rel="prefetch" href="/assets/2019-02-19-安装ESXi时分区失败的处理方法.html-_bH4HvE-.js" as="script"><link rel="prefetch" href="/assets/2020-06-02-vCenter6.0安装笔记.html-CV-3KCPO.js" as="script"><link rel="prefetch" href="/assets/2020-06-08-vCenter6.0UpdateManager安装笔记.html-XZyR3TwL.js" as="script"><link rel="prefetch" href="/assets/2020-07-27-在VMwarevCenter中使用企业CA或第三方CA替换VMCA.html-wqfFCSXB.js" as="script"><link rel="prefetch" href="/assets/index.html-jj2lenVR.js" as="script"><link rel="prefetch" href="/assets/404.html-CYU66to5.js" as="script"><link rel="prefetch" href="/assets/index.html-l5Oap73b.js" as="script"><link rel="prefetch" href="/assets/index.html-_d9y5pfo.js" as="script"><link rel="prefetch" href="/assets/index.html-BWNOj9OD.js" as="script"><link rel="prefetch" href="/assets/index.html-CaifLGz0.js" as="script"><link rel="prefetch" href="/assets/index.html-bMSCVG3x.js" as="script"><link rel="prefetch" href="/assets/index.html-DO92014c.js" as="script"><link rel="prefetch" href="/assets/index.html-Bu0sr_FS.js" as="script"><link rel="prefetch" href="/assets/index.html-BOuRTra-.js" as="script"><link rel="prefetch" href="/assets/index.html-BwmC8eY_.js" as="script"><link rel="prefetch" href="/assets/index.html-5GtXDT9r.js" as="script"><link rel="prefetch" href="/assets/index.html-Bktb9v2_.js" as="script"><link rel="prefetch" href="/assets/index.html-DNvAZI3e.js" as="script"><link rel="prefetch" href="/assets/index.html-CseU3znP.js" as="script"><link rel="prefetch" href="/assets/index.html-Bee-BqhA.js" as="script"><link rel="prefetch" href="/assets/index.html-DyQfw3Xl.js" as="script"><link rel="prefetch" href="/assets/index.html-Cg3qYMEj.js" as="script"><link rel="prefetch" href="/assets/index.html-BiV2msTa.js" as="script"><link rel="prefetch" href="/assets/index.html-P0r67OYE.js" as="script"><link rel="prefetch" href="/assets/index.html-DEiuj3jV.js" as="script"><link rel="prefetch" href="/assets/index.html-Jw1qg8tB.js" as="script"><link rel="prefetch" href="/assets/index.html-DI__ffaJ.js" as="script"><link rel="prefetch" href="/assets/index.html-Calq0kMO.js" as="script"><link rel="prefetch" href="/assets/index.html-CDbvKTkz.js" as="script"><link rel="prefetch" href="/assets/index.html-3HKWg23o.js" as="script"><link rel="prefetch" href="/assets/index.html-CyHl3Sx5.js" as="script"><link rel="prefetch" href="/assets/index.html-Czvav4Sk.js" as="script"><link rel="prefetch" href="/assets/index.html-D10xdplB.js" as="script"><link rel="prefetch" href="/assets/index.html-DDEDFbw5.js" as="script"><link rel="prefetch" href="/assets/index.html-hHhjzs87.js" as="script"><link rel="prefetch" href="/assets/index.html-0smUk-YT.js" as="script"><link rel="prefetch" href="/assets/index.html-B48t8xRh.js" as="script"><link rel="prefetch" href="/assets/index.html-DJfaOz7X.js" as="script"><link rel="prefetch" href="/assets/index.html-xLUqUNS9.js" as="script"><link rel="prefetch" href="/assets/index.html-D-kZqU4B.js" as="script"><link rel="prefetch" href="/assets/index.html-PrMksC5N.js" as="script"><link rel="prefetch" href="/assets/index.html-BLj893XI.js" as="script"><link rel="prefetch" href="/assets/index.html-CK-JPNLT.js" as="script"><link rel="prefetch" href="/assets/index.html-BsfBpVZu.js" as="script"><link rel="prefetch" href="/assets/index.html-B57GwJhn.js" as="script"><link rel="prefetch" href="/assets/index.html-Dff5v6c5.js" as="script"><link rel="prefetch" href="/assets/index.html-fjuijCie.js" as="script"><link rel="prefetch" href="/assets/index.html-DwUaJpvb.js" as="script"><link rel="prefetch" href="/assets/index.html-BgPfHP34.js" as="script"><link rel="prefetch" href="/assets/index.html-Dw88Rtir.js" as="script"><link rel="prefetch" href="/assets/index.html-BRR_G36I.js" as="script"><link rel="prefetch" href="/assets/index.html-DixYfMjv.js" as="script"><link rel="prefetch" href="/assets/index.html-D0LoL9c4.js" as="script"><link rel="prefetch" href="/assets/index.html-BRpLSpVM.js" as="script"><link rel="prefetch" href="/assets/index.html-TFYjoZLK.js" as="script"><link rel="prefetch" href="/assets/index.html-D4k8ohhw.js" as="script"><link rel="prefetch" href="/assets/index.html-CcbvyRQJ.js" as="script"><link rel="prefetch" href="/assets/index.html-wbXDR6Yj.js" as="script"><link rel="prefetch" href="/assets/index.html-DApT9IFC.js" as="script"><link rel="prefetch" href="/assets/index.html-Be1XICqQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DJCk6Gwj.js" as="script"><link rel="prefetch" href="/assets/index.html-DcxxWPFs.js" as="script"><link rel="prefetch" href="/assets/index.html-COTvSepf.js" as="script"><link rel="prefetch" href="/assets/index.html-9our4q2h.js" as="script"><link rel="prefetch" href="/assets/index.html-DM4_bGUV.js" as="script"><link rel="prefetch" href="/assets/index.html-DogxY76f.js" as="script"><link rel="prefetch" href="/assets/index.html-REh18rEK.js" as="script"><link rel="prefetch" href="/assets/index.html-BTDotBIN.js" as="script"><link rel="prefetch" href="/assets/index.html-BTIYpjje.js" as="script"><link rel="prefetch" href="/assets/index.html-B-eMI-um.js" as="script"><link rel="prefetch" href="/assets/index.html-DYvDR7MM.js" as="script"><link rel="prefetch" href="/assets/index.html-niGPRB7q.js" as="script"><link rel="prefetch" href="/assets/index.html-deWZAch6.js" as="script"><link rel="prefetch" href="/assets/index.html-Cx0TbYQB.js" as="script"><link rel="prefetch" href="/assets/index.html-bUxNLU9j.js" as="script"><link rel="prefetch" href="/assets/index.html-DAG3A1kI.js" as="script"><link rel="prefetch" href="/assets/index.html-BarHBpGP.js" as="script"><link rel="prefetch" href="/assets/index.html-BiyrTSmd.js" as="script"><link rel="prefetch" href="/assets/index.html-DHjy1ax_.js" as="script"><link rel="prefetch" href="/assets/index.html-Cweogabo.js" as="script"><link rel="prefetch" href="/assets/index.html-Cck0EnDw.js" as="script"><link rel="prefetch" href="/assets/index.html-NhwrdFyq.js" as="script"><link rel="prefetch" href="/assets/index.html-Cqzyvnmk.js" as="script"><link rel="prefetch" href="/assets/index.html-D0N5ADoS.js" as="script"><link rel="prefetch" href="/assets/index.html-CIsyaeqA.js" as="script"><link rel="prefetch" href="/assets/index.html-Um0yE4Ko.js" as="script"><link rel="prefetch" href="/assets/index.html-CdBj3zfL.js" as="script"><link rel="prefetch" href="/assets/index.html-08-Uz7v2.js" as="script"><link rel="prefetch" href="/assets/index.html-DkNctMnC.js" as="script"><link rel="prefetch" href="/assets/index.html-k-3CEC2V.js" as="script"><link rel="prefetch" href="/assets/index.html-CGNZi-rD.js" as="script"><link rel="prefetch" href="/assets/index.html-Bp7lZtDn.js" as="script"><link rel="prefetch" href="/assets/index.html-BBzrXJgL.js" as="script"><link rel="prefetch" href="/assets/index.html-AFUEMA2F.js" as="script"><link rel="prefetch" href="/assets/index.html-sa6NdGCN.js" as="script"><link rel="prefetch" href="/assets/index.html-DUt-pLke.js" as="script"><link rel="prefetch" href="/assets/index.html-CKPc2mIR.js" as="script"><link rel="prefetch" href="/assets/index.html-2dJIzmBe.js" as="script"><link rel="prefetch" href="/assets/index.html-BmiTEdfQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DG061by-.js" as="script"><link rel="prefetch" href="/assets/index.html-BPIjeu3w.js" as="script"><link rel="prefetch" href="/assets/index.html-CBEtz5f0.js" as="script"><link rel="prefetch" href="/assets/index.html-Zvn59SRE.js" as="script"><link rel="prefetch" href="/assets/index.html-Cp2dt2_Q.js" as="script"><link rel="prefetch" href="/assets/index.html-DMhuc90W.js" as="script"><link rel="prefetch" href="/assets/index.html-Dibgl7mF.js" as="script"><link rel="prefetch" href="/assets/index.html-CxiL7yoE.js" as="script"><link rel="prefetch" href="/assets/index.html-CkCmvyJ-.js" as="script"><link rel="prefetch" href="/assets/index.html-DZ9BUOjk.js" as="script"><link rel="prefetch" href="/assets/index.html-C9wN9jP6.js" as="script"><link rel="prefetch" href="/assets/index.html-BiCvfI_3.js" as="script"><link rel="prefetch" href="/assets/index.html-l45pfgjQ.js" as="script"><link rel="prefetch" href="/assets/index.html-DX-bYTBv.js" as="script"><link rel="prefetch" href="/assets/index.html-yTJysfaN.js" as="script"><link rel="prefetch" href="/assets/index.html-C9wmAdBs.js" as="script"><link rel="prefetch" href="/assets/index.html-B-hqvFO5.js" as="script"><link rel="prefetch" href="/assets/index.html-eaw8VORE.js" as="script"><link rel="prefetch" href="/assets/index.html-DOK6maJi.js" as="script"><link rel="prefetch" href="/assets/index.html-DpSQEMRF.js" as="script"><link rel="prefetch" href="/assets/index.html-CJbZHJt1.js" as="script"><link rel="prefetch" href="/assets/index.html-Bw9DyxCL.js" as="script"><link rel="prefetch" href="/assets/index.html-DMwYEiC4.js" as="script"><link rel="prefetch" href="/assets/index.html-H4pVZJAz.js" as="script"><link rel="prefetch" href="/assets/index.html-Bv-IDLBG.js" as="script"><link rel="prefetch" href="/assets/index.html-CGu_taaE.js" as="script"><link rel="prefetch" href="/assets/index.html-BeKH4h45.js" as="script"><link rel="prefetch" href="/assets/index.html-CbdtXZAN.js" as="script"><link rel="prefetch" href="/assets/index.html-epIbm3oX.js" as="script"><link rel="prefetch" href="/assets/index.html-glyabA_0.js" as="script"><link rel="prefetch" href="/assets/index.html-CIKnFxpp.js" as="script"><link rel="prefetch" href="/assets/index.html-aqubn0IP.js" as="script"><link rel="prefetch" href="/assets/index.html-BBM9uOq1.js" as="script"><link rel="prefetch" href="/assets/index.html-DbmKzxwv.js" as="script"><link rel="prefetch" href="/assets/index-Da0dhnY-.js" as="script"><link rel="prefetch" href="/assets/flowchart-CAFN9Lqb.js" as="script"><link rel="prefetch" href="/assets/index-Ckta0vkJ.js" as="script"><link rel="prefetch" href="/assets/index-ftf7zSQz.js" as="script"><link rel="prefetch" href="/assets/index-CshvpA-e.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-Uw20VGgo.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CMg0yb1C.js" as="script"><link rel="prefetch" href="/assets/browser-CYdOP0d3.js" as="script"><link rel="prefetch" href="/assets/setupDevtools-7MC2TMWH-BfZrghWC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container external-link-icon has-toc" vp-container><!--[--><header id="navbar" class="vp-navbar" vp-navbar><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><a class="route-link vp-brand" href="/" aria-label="带我回家"><img class="vp-nav-logo" src="/assets/icon/apple-memojy.png" alt><!----><span class="vp-site-name hide-in-pad">知识杂货铺</span></a><!--]--></div><div class="vp-navbar-center"><!--[--><nav class="vp-nav-links"><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/" aria-label="主页" iconsizing="height"><!--[--><img class="vp-icon" src="/assets/blogicons/首页.png" alt aria-hidden no-view height="1em" sizing="height"><!--]-->主页<!----></a></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/article/" aria-label="所有文章" iconsizing="height"><!--[--><img class="vp-icon" src="/assets/blogicons/多个文件.png" alt aria-hidden no-view height="1em" sizing="height"><!--]-->所有文章<!----></a></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="笔记"><!--[--><img class="vp-icon" src="/assets/blogicons/笔记.png" alt aria-hidden no-view height="1em" sizing="height">笔记<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Blogs/ITManage/" aria-label="IT管理" iconsizing="both"><!--[--><iconify-icon class="vp-icon" icon="mdi:source-branch" width="1em" height="1em" sizing="both"></iconify-icon><!--]-->IT管理<!----></a></li><li class="vp-dropdown-item"><a class="route-link route-link-active auto-link" href="/posts/Blogs/CyberSecurity/" aria-label="网络安全" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/网络安全.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->网络安全<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Blogs/Markdown/" aria-label="Markdown" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Markdown.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->Markdown<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Blogs/Network/" aria-label="网络" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/网络.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->网络<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Blogs/Linux/" aria-label="Linux" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Linux.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->Linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Blogs/CodeSnippets/" aria-label="代码片段" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/源代码.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->代码片段<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="配置技巧"><!--[--><img class="vp-icon" src="/assets/blogicons/计算机设置.png" alt aria-hidden no-view height="1em" sizing="height">配置技巧<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/Database/" aria-label="数据库" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/数据库服务器.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->数据库<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/CloudAndVMs/" aria-label="云和虚拟化" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/云.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->云和虚拟化<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/macOS/" aria-label="macOS" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Apple.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->macOS<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/Windows/" aria-label="Windows" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Windows.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->Windows<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/Linux/" aria-label="Linux" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Linux.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->Linux<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Config/CodeSnippets/" aria-label="代码片段" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/源代码.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->代码片段<!----></a></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><div class="vp-dropdown-wrapper"><button type="button" class="vp-dropdown-title" aria-label="收集箱"><!--[--><img class="vp-icon" src="/assets/blogicons/收件箱.png" alt aria-hidden no-view height="1em" sizing="height">收集箱<!--]--><span class="arrow"></span><ul class="vp-dropdown"><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Collection/OpensourceProject.html" aria-label="开源项目收集" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Github.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->开源项目收集<!----></a></li><li class="vp-dropdown-item"><a class="route-link auto-link" href="/posts/Collection/OnlineTools.html" aria-label="在线资源 &amp; 工具" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/工具.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->在线资源 &amp; 工具<!----></a></li><li class="vp-dropdown-item"><h4 class="vp-dropdown-subtitle">macOS</h4><ul class="vp-dropdown-subitems"><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/Collection/macOS%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8.html" aria-label="macOS 软件工具列表" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/AppStore.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->macOS 软件工具列表<!----></a></li><li class="vp-dropdown-subitem"><a class="route-link auto-link" href="/posts/Collection/macOS_IPSW_%E6%A0%BC%E5%BC%8F%E5%AE%89%E8%A3%85%E9%95%9C%E5%83%8F%E4%B8%8B%E8%BD%BD.html" aria-label="macOS IPSW 格式安装镜像下载" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/macos.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->macOS IPSW 格式安装镜像下载<!----></a></li></ul></li></ul></button></div></div><div class="vp-nav-item hide-in-mobile"><a class="route-link auto-link" href="/intro.html" aria-label="关于我" iconsizing="height"><!--[--><img class="vp-icon" src="/assets/blogicons/用户.png" alt aria-hidden no-view height="1em" sizing="height"><!--]-->关于我<!----></a></div></nav><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!----><div class="vp-nav-item hide-in-mobile"><button type="button" class="vp-color-mode-switch" id="color-mode-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" name="auto" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" name="dark" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" name="light" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar" vp-sidebar><!----><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/assets/blogicons/工作流程.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">IT管理</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable active" type="button"><img class="vp-icon" src="/assets/blogicons/网络安全.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">网络安全</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><a class="route-link route-link-active auto-link vp-sidebar-link active" href="/posts/Blogs/CyberSecurity/2024-07-11-STP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E4%B8%8E%E9%98%B2%E6%8A%A4%E7%AD%96%E7%95%A5.html" aria-label="STP 协议的安全性与防护策略" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/交换安全.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->STP 协议的安全性与防护策略<!----></a></li><li><a class="route-link auto-link vp-sidebar-link" href="/posts/Blogs/CyberSecurity/2024-08-02-%E4%BD%BF%E7%94%A8Kali%E8%BF%9B%E8%A1%8CFlood%E6%94%BB%E5%87%BB.html" aria-label="使用 Kali 进行 Flood 攻击" iconsizing="both"><!--[--><img class="vp-icon" src="/assets/blogicons/Kali.png" alt aria-hidden no-view width="1em" height="1em" sizing="both"><!--]-->使用 Kali 进行 Flood 攻击<!----></a></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/assets/blogicons/Markdown.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">Markdown</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/assets/blogicons/网络.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">网络</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/assets/blogicons/Linux.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">Linux</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-header clickable" type="button"><img class="vp-icon" src="/assets/blogicons/源代码.png" alt aria-hidden no-view height="1em" sizing="height"><span class="vp-sidebar-title">代码片段</span><span class="vp-arrow end"></span></button><!----></section></li></ul><!----></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><img class="vp-icon" src="/assets/blogicons/交换安全.png" alt aria-hidden no-view height="1em" sizing="height">STP 协议的安全性与防护策略</h1><div class="page-info"><span class="page-original-info">原创</span><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon" name="author"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">昌霖学长</span></span><span property="author" content="昌霖学长"></span></span><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon" name="calendar"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span data-allow-mismatch="text">2024年7月11日</span><meta property="datePublished" content="2024-07-11T00:00:00.000Z"></span><span class="page-category-info" aria-label="分类🌈" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon" name="category"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item color4 clickable" role="navigation">网络安全</span><span class="page-category-item color3 clickable" role="navigation">交换网络安全</span><!--]--><meta property="articleSection" content="网络安全,交换网络安全"></span><span class="page-tag-info" aria-label="标签🏷" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon" name="tag"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item color4 clickable" role="navigation">网络安全</span><span class="page-tag-item color5 clickable" role="navigation">STP</span><span class="page-tag-item color2 clickable" role="navigation">生成树</span><!--]--><meta property="keywords" content="网络安全,STP,生成树"></span><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon" name="timer"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 20 分钟</span><meta property="timeRequired" content="PT20M"></span><span class="page-word-info" aria-label="字数🔠" data-balloon-pos="up"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="word icon" name="word"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 5880 字</span><meta property="wordCount" content="5880"></span><!----></div><hr></div><div class="vp-toc-placeholder"><aside id="toc" vp-toc><!----><!--[--><div class="vp-toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon" name="print"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button><div class="arrow end"></div></div><div class="vp-toc-wrapper"><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_1-stp-简介">1. STP 简介</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-1-stp-协议的作用">1.1. STP 协议的作用</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_1-2-stp-协议的工作原理">1.2. STP 协议的工作原理</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_2-stp协议的安全风险">2. STP协议的安全风险</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_3-针对-stp-协议的攻击类型">3. 针对 STP 协议的攻击类型</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-1-根桥欺骗攻击">3.1. 根桥欺骗攻击</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_3-2-bpdu-泛洪攻击">3.2. BPDU 泛洪攻击</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_4-stp-安全防护措施">4. STP 安全防护措施</a></li><li><ul class="vp-toc-list"><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-1-边缘端口和-bpdu-过滤">4.1. 边缘端口和 BPDU 过滤</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-2-bpdu-保护功能">4.2. BPDU 保护功能</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-3-tc-保护功能">4.3. TC 保护功能</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-4-指定端口的-root-保护功能">4.4. 指定端口的 ROOT 保护功能</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level3" href="#_4-5-根端口的环路保护功能">4.5. 根端口的环路保护功能</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#_5-总结">5. 总结</a></li><!----><!--]--><!--[--><li class="vp-toc-item"><a class="route-link vp-toc-link level2" href="#参考资料">参考资料</a></li><!----><!--]--></ul><div class="vp-toc-marker" style="top:-1.7rem;"></div></div><!--]--><!----></aside></div><!----><div class="theme-hope-content" vp-content><h2 id="_1-stp-简介" tabindex="-1"><a class="header-anchor" href="#_1-stp-简介"><span>1. STP 简介</span></a></h2><h3 id="_1-1-stp-协议的作用" tabindex="-1"><a class="header-anchor" href="#_1-1-stp-协议的作用"><span>1.1. STP 协议的作用</span></a></h3><p>生成树协议（Spanning Tree Protocol，简称 STP）是一种网络协议，它用于在交换网络中消除数据链路层的环路。在物理上或逻辑上存在多个路径的网络环境中，环路可能会导致数据包不断循环传输，从而耗尽网络资源，导致网络瘫痪。为了防止这种情况发生，STP 通过计算出一个无环的生成树来确保网络中的每个数据帧都能准确地从一个源传输到多个目的地，而不会出现无限循环。</p><h3 id="_1-2-stp-协议的工作原理" tabindex="-1"><a class="header-anchor" href="#_1-2-stp-协议的工作原理"><span>1.2. STP 协议的工作原理</span></a></h3><div class="hint-container tip"><p class="hint-container-title">提示</p><p>因为性能方面的限制等因素，早期的交换机一般只有两个转发端口（如果端口多了，交换的转发速度就会慢得无法接受），所以那时的交换机常常被称为「网桥」，或简称「桥」，在 IEEE 的术语中，「桥」这个术语一直沿用至今，但并不只是指只有两个转发口的交换机了，而是泛指具有任意多端口的交换机。目前，「桥」和「交换机」这两个术语是完全混用的，<strong>本文中也会出现「桥」和「交换机」两个术语混用的情况</strong>。</p></div><p>STP 协议通过在网络中构建一个逻辑拓扑图来实现。在该拓扑图中，每个交换机都有一个优先级值，被称为「桥 ID（Bridge ID）」，用于确定根交换机。STP 协议会选择一个交换机作为根交换机，并根据各个交换机的距离（路径成本）到根交换机的距离来计算最佳路径。通过建立无环树状的拓扑结构，STP 协议将冗余路径上的某些接口进行阻塞，以避免环路产生。</p><p>STP 协议的工作原理是基于以下几个重要的机制：</p><ol><li><p><strong>选举根交换机（Root Bridge）</strong>：网络中的每个交换机都会有一个唯一的「桥 ID（Bridge ID）」，由桥优先级和 MAC 地址组成。当网络启动时，所有交换机都会广播 BPDU（Bridge Protocol Data Units）报文，这些报文包含了交换机自身的「桥 ID」。网络中的其他交换机会比较收到的 BPDU 报文，选择「桥 ID」最小的交换机作为根交换机（根桥）。根交换机（根桥）是生成树的参考点，所有数据传输都将以根交换机（根桥）为起点进行。</p></li><li><p><strong>确定端口角色</strong>：每个交换机（桥）都会计算到达根交换机（根桥）的最佳路径，并据此确定其端口的角色（根端口、指定端口、非指定端口）。</p><ul><li><strong>根端口（Root Port）</strong>： 每个非根桥将选择一条到达根桥的最佳路径，这条路径上的端口被选举为根端口。</li><li><strong>指定端口（Designated Port）</strong>： 在每条物理链路（两个交换机之间）上选举指定端口，到达根桥开销最小的端口将成为指定端口。</li><li><strong>非指定端口（Non-Designated Port）</strong>： 除了根端口和指定端口外的其他端口，这些端口将被阻塞，不参与数据转发。</li></ul></li><li><p><strong>BPDU（Bridge Protocol Data Units）报文交换</strong>：BPDU 是 STP 协议中交换的消息单位，包含了交换机的信息，比如「桥 ID（Bridge ID）」、「路径成本」、「端口 ID（Port ID）」 等。通过 BPDU 报文交换，交换机可以计算出根交换机和最佳路径。BPDU 报文周期性的在交换机之间发送，用于维护和更新生成树的状态。</p></li><li><p><strong>端口状态转换</strong>：为了确保无环的拓扑结构，STP 将端口配置为不同的状态。这些状态包括：禁用、监听、学习、转发和阻塞。阻塞状态是关键，它阻止了某些端口参与数据转发，从而消除了环路。</p><ul><li><strong>禁用（Disabled）</strong>： 端口初始状态，不参与任何活动。</li><li><strong>监听（Listening）</strong>： 端口开始接收并处理BPDU，但不转发数据帧。</li><li><strong>学习（Learning）</strong>： 端口学习网络中的MAC地址，但不转发数据帧。</li><li><strong>转发（Forwarding）</strong>： 端口正常转发数据帧。</li><li><strong>阻塞（Blocking）</strong>： 端口接收BPDU但不学习MAC地址，也不转发数据帧。</li></ul></li></ol><p>STP 的工作原理是一个动态的过程，它通过选举根交换机（根桥）、确定端口角色、BPDU报文交换和端口状态转换等一系列操作，确保了网络中不存在环路，同时保持了网络的冗余性和可靠性。这一机制使得 STP 成为以太网交换网络中不可或缺的协议之一，它为网络的稳定运行提供了重要保障。</p><h2 id="_2-stp协议的安全风险" tabindex="-1"><a class="header-anchor" href="#_2-stp协议的安全风险"><span>2. STP协议的安全风险</span></a></h2><p>虽然 STP 是为了提高网络的可靠性和稳定性而设计的，但它自身也存在一些安全风险。这些风险可能会被恶意用户利用，对网络造成不利影响。</p><p>STP 协议存在以下漏洞，攻击者可能利用这些漏洞来实施攻击：</p><ul><li><p><strong>无效的优先级设置</strong>：STP 协议中的优先级设置是一个非常重要的参数，攻击者通过将其设备的优先级设置为 0 或最高值，从而成为网络中的根桥，进而控制整个网络。</p></li><li><p><strong>缺乏认证机制</strong>：STP 协议在默认配置下没有认证机制，攻击者可以轻松伪造 BPDU 信息，影响网络拓扑计算和数据传输。</p></li><li><p><strong>未经授权的设备加入</strong>：STP 协议默认情况下允许任何设备加入网络，攻击者可以通过在网络中插入未经授权的设备，从而拦截、修改或阻止网络中的通信。</p></li><li><p><strong>未加密的数据传输</strong>：STP 协议中的数据传输是明文的，攻击者可以窃听或篡改网络中的数据，严重威胁网络安全。</p></li></ul><h2 id="_3-针对-stp-协议的攻击类型" tabindex="-1"><a class="header-anchor" href="#_3-针对-stp-协议的攻击类型"><span>3. 针对 STP 协议的攻击类型</span></a></h2><p>STP 协议的攻击类型主要包括以下几种：</p><ul><li><p><strong>根桥欺骗攻击</strong>：攻击者伪造 BPDU 信息，将自己的设备优先级设置为网络中的根桥，从而控制整个网络的拓扑计算和数据传输。也被称为「BPDU 欺骗攻击」、「STP 欺骗攻击」、「抢根攻击」等。</p></li><li><p><strong>BPDU 泛洪攻击</strong>：攻击者向网络发送大量的BPDU报文，导致交换机不断重新计算生成树，从而消耗网络资源，引发网络中断。也被称为「生成树重计算攻击」、「STP 泛洪攻击」、「STP 拒绝服务攻击」等。</p></li></ul><h3 id="_3-1-根桥欺骗攻击" tabindex="-1"><a class="header-anchor" href="#_3-1-根桥欺骗攻击"><span>3.1. 根桥欺骗攻击</span></a></h3><p>根桥欺骗攻击的基本原理是让自己控制的交换机成为网络中的根桥，从而控制整个网络的拓扑结构和数据流。</p><p>攻击步骤如下：</p><ol><li><p><strong>监听网络</strong>：攻击者首先需要监听网络中的 BPDU 报文，以了解当前网络中的根桥信息。</p></li><li><p><strong>伪造 BPDU 报文</strong>：攻击者随后会伪造 BPDU 报文，将这些报文的「桥 ID」设置为比当前根桥更小的值。通常，攻击者会将桥优先级设置为比默认值更小的数值，如果桥优先级相同，则比较 MAC 地址，攻击者会选择一个更小的 MAC 地址。</p></li><li><p><strong>发送伪造的BPDU报文</strong>：攻击者将伪造的 BPDU 报文发送到网络中。由于这些 BPDU 报文的「桥 ID」更小，根据 STP 的选举规则，网络中的其他交换机会认为攻击者的交换机应该是新的根桥。</p></li><li><p><strong>拓扑重新计算</strong>：当网络中的交换机收到伪造的 BPDU 报文后，它们会根据 STP 算法重新计算生成树，将攻击者的交换机作为新的根桥，并相应地调整端口状态（如将某些端口从转发状态变为阻塞状态）。</p></li></ol><p>攻击者一旦通过此方法攻击成功，可能会对网络造成以下危害。</p><ul><li>一旦攻击者的交换机被选举为根桥，所有网络流量都将通过这台交换机，攻击者可以监控、修改或丢弃这些流量。</li><li>重新计算生成树可能导致网络中的某些端口状态改变，从而引起短暂的或持续的网络中断。</li><li>攻击者可以捕获和分析通过其设备的流量，可能会窃取敏感信息。</li></ul><h3 id="_3-2-bpdu-泛洪攻击" tabindex="-1"><a class="header-anchor" href="#_3-2-bpdu-泛洪攻击"><span>3.2. BPDU 泛洪攻击</span></a></h3><p>BPDU 泛洪攻击是一种针对 STP 网络的攻击手段，其目的是通过大量的 BPDU（Bridge Protocol Data Units）报文，不断触发生成树的重新计算，使网络中的交换机资源耗尽，从而导致网络服务中断。</p><p>攻击步骤如下：</p><ol><li><p><strong>监听网络</strong>：攻击者首先需要监听网络中的 BPDU 报文，以了解当前网络中的根桥信息。</p></li><li><p><strong>伪造BPDU报文</strong>：攻击者接着伪造大量的 BPDU 报文。这些报文可能具有不同的「桥ID（Bridge ID）」，或者故意设置一些字段以触发 STP 的特定行为。如果攻击者伪造的 BPDU 报文中具有更高优先级（更小的「桥 ID」），那么便会触发生成树的重计算。</p></li><li><p><strong>周期性大量发送伪造的 BPDU 报文</strong>：攻击者周期性地在网络中广播伪造的BPDU报文，使得网络中的交换机接收并处理这些报文。由于攻击者发送的 BPDU 报文中的「桥 ID」是随机生成的，那么交换机一旦收到一个比当前「桥 ID」更小的 BPDU 报文就会认为网络中存在一个更高优先级的桥，便会重新计算生成树。而这类报文是不断的随机发送，交换机需要不断的处理 BPDU 报文，来决定忽略报文内容还是重新计算生成树。</p></li><li><p><strong>消耗交换机资源，触发生成树重新计算</strong>：当交换机接收到伪造的BPDU报文后，它们会根据STP算法比较 BPDU 报文中的内容和本地的内容，来选择丢弃报文还是重新计算生成树。重新计算生成树这个过程包括选举新的根桥、根端口、指定端口和非指定端口，以及相应的端口状态转换。如果根桥 ID 不断变化的话，甚至会导致生成树计算持续进行，从而使生成树无法收敛。</p></li></ol><p>攻击者一旦通过此方法攻击网络，可能会对网络造成以下危害。</p><ul><li><strong>资源耗尽</strong>： 生成树的频繁重新计算会消耗大量的 CPU 和内存资源，可能导致交换机性能下降或暂时不可用。</li><li><strong>网络中断</strong>： 端口状态的频繁变化可能导致网络中的数据流中断，影响正常的网络服务。</li><li><strong>服务拒绝</strong>： 在极端情况下，持续的攻击可能导致交换机重启或完全停止工作，实现拒绝服务攻击的效果。</li></ul><h2 id="_4-stp-安全防护措施" tabindex="-1"><a class="header-anchor" href="#_4-stp-安全防护措施"><span>4. STP 安全防护措施</span></a></h2><h3 id="_4-1-边缘端口和-bpdu-过滤" tabindex="-1"><a class="header-anchor" href="#_4-1-边缘端口和-bpdu-过滤"><span>4.1. 边缘端口和 BPDU 过滤</span></a></h3><p>交换机用户侧设备（如服务器、用户终端等）不需运行 STP 协议。若连接这些设备的交换机端口使能了 STP，那么端口状态在 Up/Down 上不停跳转，或 STP 拓扑变化时端口需要一段时间才能进入转发状态，这对某些业务是不可接受的。为了避免上述问题，需要把连接不需要运行 STP 协议设备的端口配置为边缘端口。边缘端口状态变为 Up 后可以快速进入转发状态，并且不会发送 TC 报文，也不会对运行了 STP 协议的网络造成影响。</p><p>边缘端口直接和用户终端相连，正常情况下，边缘端口不会收到 BPDU 报文。如果攻击者伪造 BPDU 恶意攻击交换机，当边缘端口接收到 BPDU 报文时，交换机会自动将边缘端口设置为非边缘端口，并重新进行生成树计算，从而引起网络震荡。因此可以配置边缘端口的BPDU报文过滤功能，使边缘端口不处理、不发送BPDU报文。</p><p>以华为交换机为例，请在交换机上进行以下配置。</p><ul><li><p>在全局下配置：</p><ul><li><p>进入系统视图。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">system-view</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>配置设备上所有端口为边缘端口。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stp edged-port default</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，设备的所有端口为非边缘端口。</p></div></li><li><p>配置设备上所有端口为 BPDU filter 端口。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stp bpdu-filter default</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，设备的所有端口为非BPDU filter端口。</p></div></li></ul></li><li><p>在接口下配置：</p><ul><li><p>进入系统视图。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">system-view</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>进入接口视图。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">interface &lt;interface-type&gt; &lt;interface-number&gt;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li><li><p>将接口从三层模式切换到二层模式。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">portswitch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>请根据实际接口类型自行选择是否要执行此步骤。</p></div></li><li><p>配置端口为边缘端口。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stp edged-port enable</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，设备的所有端口为非边缘端口。</p></div></li><li><p>配置端口为 BPDU filter 端口。</p><div class="language-shellsession line-numbers-mode" data-highlighter="shiki" data-ext="shellsession" data-title="Huawei VRP Console" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">stp bpdu-filter enable</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，设备的所有端口为非 BPDU filter 端口。</p></div></li></ul></li></ul><h3 id="_4-2-bpdu-保护功能" tabindex="-1"><a class="header-anchor" href="#_4-2-bpdu-保护功能"><span>4.2. BPDU 保护功能</span></a></h3><p>边缘端口直接和用户终端相连，正常情况下，边缘端口不会收到 BPDU 报文。如果攻击者伪造 BPDU 恶意攻击交换机，当边缘端口接收到 BPDU 报文时，交换机会自动将边缘端口设置为非边缘端口，并重新进行生成树计算，从而引起网络震荡。</p><p>通过配置 BPDU 保护功能可以防止这种攻击。设备上使能了 BPDU 保护功能后，如果边缘端口收到 BPDU，系统就将这些端口 Shutdown。</p><p>以华为交换机为例，请在有边缘端口的交换机上进行以下配置。</p><ul><li>执行命令 <code>system-view</code>，进入系统视图。</li><li>执行命令 <code>stp bpdu-protection</code>，配置交换机的 BPDU 保护功能。</li></ul><div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，交换机的 BPDU 保护功能处于去使能状态。</p></div><h3 id="_4-3-tc-保护功能" tabindex="-1"><a class="header-anchor" href="#_4-3-tc-保护功能"><span>4.3. TC 保护功能</span></a></h3><p>如果攻击者伪造拓扑变化 BPDU 报文恶意攻击交换机，交换机短时间内会收到很多拓扑变化 BPDU 报文，频繁的删除操作会给设备造成很大的负担，也给网络的稳定带来很大隐患。</p><p>启用 TC 保护功能后，在指定时间内，交换机处理拓扑变化报文的次数可配置。如果在单位时间内，交换机在收到拓扑变化报文数量大于配置的阈值，那么设备只会处理阈值指定的次数。对于其他超出阈值的拓扑变化报文，定时器到期后设备只对其统一处理一次。例如，时间设定为 10 秒，阈值设定为 5，则设备收到拓扑变化报文后，在 10 秒内只会处理最开始收到的 5 个拓扑变化报文，对于后面收到的报文则会等 10 秒超时后再统一处理。这样可以避免频繁的删除 MAC 地址表项和 ARP 表项，从而达到保护设备的目的。</p><p>以华为交换机为例，请在交换机上进行以下配置。</p><ul><li><p>执行命令 <code>system-view</code>，进入系统视图。</p></li><li><p>配置 TC 保护功能的参数，请选择执行其中一个或多个：</p><ul><li>执行命令 <code>stp tc-protection interval &lt;interval-value&gt;</code>，配置交换机处理指定阈值数的拓扑变化报文所需的时间。<div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，交换机处理指定阈值的拓扑变化报文所需的时间是 10 秒。</p></div></li><li>执行命令 <code>stp tc-protection threshold &lt;threshold&gt;</code>，配置交换机在设定时间内处理拓扑变化报文的阈值。<div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，交换机单位时间内处理拓扑变化报文并立即刷新转发表项的缺省值是 1。</p></div></li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>在 <code>stp tc-protection interval</code> 指定的时间内，设备只会处理 <code>stp tc-protection threshold</code> 指定的数量的拓扑变化报文，对于其他的报文会延迟处理，所以可能会影响生成树的收敛速度。</p></div></li></ul><h3 id="_4-4-指定端口的-root-保护功能" tabindex="-1"><a class="header-anchor" href="#_4-4-指定端口的-root-保护功能"><span>4.4. 指定端口的 ROOT 保护功能</span></a></h3><p>由于维护人员的错误配置或网络中的恶意攻击，网络中的合法根交换机有可能会收到优先级更高的 BPDU 报文，使得合法根交换机失去根交换机的地位，引起网络拓扑结构的错误变动。这种不合法的拓扑变化，可能会导致原来应该通过高速链路的流量被牵引到低速链路上，造成网络拥塞。为了防止这种情况发生，可在交换机上部署 Root 保护功能，通过维持指定端口的角色来保护根交换机的地位。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>Root 保护是指定端口上的特性。当端口的角色是指定端口时，配置的 Root 保护功能才生效。若在其他类型的端口上配置 Root 保护功能，Root 保护功能不会生效。</p></div><p>以华为交换机为例，请在<strong>根交换机</strong>上进行以下配置。</p><ul><li>执行命令 <code>system-view</code>，进入系统视图。</li><li>执行命令 <code>interface &lt;interface-type&gt; &lt;interface-number&gt;</code>，进入以太网接口视图。</li><li>执行命令 <code>stp root-protection</code>，配置交换机的 Root 保护功能。(缺省情况下，端口的 Root 保护功能处于去使能状态。)</li></ul><h3 id="_4-5-根端口的环路保护功能" tabindex="-1"><a class="header-anchor" href="#_4-5-根端口的环路保护功能"><span>4.5. 根端口的环路保护功能</span></a></h3><p>在运行 STP/RSTP/MSTP 协议的网络中，根端口和其他阻塞端口状态是依靠不断接收来自上游交换设备的 BPDU 维持。当由于链路拥塞或者单向链路故障导致这些端口收不到来自上游交换设备的 BPDU 时，交换设备会重新选择根端口。原先的根端口会转变为指定端口，而原先的阻塞端口会迁移到转发状态，从而造成交换网络中可能产生环路。为了防止以上情况发生，可部署环路保护功能。</p><p>在启动了环路保护功能后，如果根端口或 Alternate 端口长时间收不到来自上游设备的 BPDU 报文时，则向网管发出通知信息（此时根端口会进入 Discarding 状态，角色切换为指定端口），而 Alternate 端口则会一直保持在阻塞状态（角色也会切换为指定端口），不转发报文，从而不会在网络中形成环路。直到链路不再拥塞或单向链路故障恢复，端口重新收到 BPDU 报文进行协商，并恢复到链路拥塞或者单向链路故障前的角色和状态。</p><p>以华为交换机为例，请在交换机上进行以下配置。</p><ul><li>执行命令 <code>system-view</code>，进入系统视图。</li><li>执行命令 <code>interface &lt;interface-type&gt; &lt;interface-number&gt;</code>，进入根端口或 Alternate 端口（参与生成树协议计算的接口）接口视图。</li><li>执行命令 <code>stp loop-protection</code>，配置交换设备根端口或 Alternate 端口的环路保护功能。<div class="hint-container info"><p class="hint-container-title">说明</p><p>缺省情况下，端口的环路保护功能处于关闭状态。</p></div></li></ul><div class="hint-container tip"><p class="hint-container-title">提示</p><p>由于 Alternate 端口是根端口的备份端口，如果交换设备上有 Alternate 端口，需要在根端口和 Alternate 端口上同时配置环路保护。</p></div><div class="hint-container warning"><p class="hint-container-title">注意</p><p>配置了 Root 保护的端口，不可以配置环路保护。</p></div><h2 id="_5-总结" tabindex="-1"><a class="header-anchor" href="#_5-总结"><span>5. 总结</span></a></h2><p>在当今高度互联的网络环境中，STP 安全的重要性不言而喻。作为确保网络稳定性和可靠性的关键协议，STP 的安全直接关系到整个网络的健康运行。通过本文的探讨，我们深入了解了 STP 的工作原理、潜在的安全风险以及相应的防护措施。</p><ul><li><p><strong>STP 安全的重要性</strong>： STP 通过消除网络中的环路，防止了广播风暴和数据包的无限循环，保障了数据传输的效率和可靠性。然而，一旦 STP 遭受攻击，不仅会影响网络的正常运行，还可能导致数据泄露和服务中断，对企业的业务连续性和数据安全构成严重威胁。因此，确保 STP 的安全性是网络管理的重中之重。</p></li><li><p><strong>关注 STP 安全风险</strong>： 网络管理员必须对 STP 可能面临的安全风险保持高度警觉。从 BPDU 泛洪攻击到根桥欺骗，再到生成树重计算攻击，这些风险都需要被认真对待。了解这些攻击的原理和潜在影响是采取有效防护措施的前提。</p></li><li><p><strong>及时采取防护措施</strong>： 面对 STP 安全风险，网络管理员应立即采取一系列防护措施。这包括配置边缘端口和启用 BPDU 过滤功能、启用 BPDU 保护、TC 保护、Root 保护、环路保护等安全功能。同时，定期的监控、日志审查、固件更新和补丁管理也是维护 STP 安全的重要组成部分。</p></li></ul><p>保障 STP 的安全不仅是技术层面的挑战，更是网络管理策略和意识的体现。作为网络管理员，我们应当持续关注 STP 的最新动态，不断提升自身的安全防护能力，确保网络环境的安全、稳定和高效。通过正确的配置和维护，我们可以有效地防御 STP 相关的安全威胁。</p><h2 id="参考资料" tabindex="-1"><a class="header-anchor" href="#参考资料"><span>参考资料</span></a></h2><ol><li>《STP 协议的安全性与防护策略：如何防止 STP 协议相关的攻击》<a href="https://www.cnblogs.com/cooper-wang/p/10690368.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/cooper-wang/p/10690368.html</a></li><li>《S1720, S2700, S5700, S6720 V200R011C10 配置指南-以太网交换》<a href="https://support.huawei.com/enterprise/zh/doc/EDOC1000178154/90b57276" target="_blank" rel="noopener noreferrer">https://support.huawei.com/enterprise/zh/doc/EDOC1000178154/90b57276</a></li></ol></div><!----><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="update-time"><span class="vp-meta-label">上次编辑于: </span><span class="vp-meta-info" data-allow-mismatch="text">2025/2/11 10:23:29</span></div><div class="contributors"><span class="vp-meta-label">贡献者: </span><!--[--><!--[--><span class="vp-meta-info" title="email: shawnlyu1990@gmail.com">Shawn Lyu</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><!----><a class="route-link auto-link next" href="/posts/Blogs/CyberSecurity/2024-08-02-%E4%BD%BF%E7%94%A8Kali%E8%BF%9B%E8%A1%8CFlood%E6%94%BB%E5%87%BB.html" aria-label="使用 Kali 进行 Flood 攻击" iconsizing="both"><div class="hint">下一页<span class="arrow end"></span></div><div class="link">使用 Kali 进行 Flood 攻击<img class="vp-icon" src="/assets/blogicons/Kali.png" alt aria-hidden no-view height="1em" sizing="height"></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper" vp-footer><div class="vp-footer">此站点由 VuePress Theme Hope 支持创建</div><div class="vp-copyright">Copyright © 2025 昌霖学长 CC BY-NC 4.0 Licensed</div></footer></div><!--]--><!--[--><!----><!--[--><!--]--><!--]--><!--]--></div>
    <script type="module" src="/assets/app-iHV9LoWC.js" defer></script>
  </body>
</html>
